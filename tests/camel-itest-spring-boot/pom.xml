<?xml version="1.0" encoding="UTF-8"?>
<!--
  Licensed to the Apache Software Foundation (ASF) under one or more
  contributor license agreements.  See the NOTICE file distributed with
  this work for additional information regarding copyright ownership.
  The ASF licenses this file to You under the Apache License, Version 2.0
  (the "License"); you may not use this file except in compliance with
  the License.  You may obtain a copy of the License at

  http://www.apache.org/licenses/LICENSE-2.0

  Unless required by applicable law or agreed to in writing, software
  distributed under the License is distributed on an "AS IS" BASIS,
  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
  See the License for the specific language governing permissions and
  limitations under the License.
-->
<project xmlns="http://maven.apache.org/POM/4.0.0" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd">

  <modelVersion>4.0.0</modelVersion>

  <parent>
    <artifactId>tests</artifactId>
    <groupId>org.apache.camel</groupId>
    <version>2.18.0-SNAPSHOT</version>
  </parent>

  <artifactId>camel-itest-spring-boot</artifactId>
  <name>Camel :: Integration Tests :: Spring-Boot</name>
  <description>Spring-Boot Camel test</description>

  <dependencies>

    <dependency>
      <groupId>org.apache.camel</groupId>
      <artifactId>camel-spring-boot-starter</artifactId>
    </dependency>

    <!-- Dependency needed to incorporate classes in main jar -->
    <dependency>
      <groupId>org.springframework.boot</groupId>
      <artifactId>spring-boot-loader</artifactId>
      <version>${spring-boot-version}</version>
    </dependency>

    <!-- Test dependencies needed also at compile/unitTestEnabled time -->
    <dependency>
      <groupId>org.jboss.shrinkwrap</groupId>
      <artifactId>shrinkwrap-api</artifactId>
      <version>${shrinkwrap-version}</version>
    </dependency>

    <dependency>
      <groupId>org.jboss.shrinkwrap</groupId>
      <artifactId>shrinkwrap-impl-base</artifactId>
      <version>${shrinkwrap-version}</version>
    </dependency>

    <dependency>
      <groupId>junit</groupId>
      <artifactId>junit</artifactId>
    </dependency>

    <!-- Test dependencies -->
    <dependency>
      <groupId>org.jboss.arquillian.junit</groupId>
      <artifactId>arquillian-junit-container</artifactId>
      <version>${arquillian-version}</version>
      <scope>test</scope>
    </dependency>
    <dependency>
      <groupId>org.jboss.arquillian.container</groupId>
      <artifactId>arquillian-container-test-spi</artifactId>
      <version>${arquillian-version}</version>
    </dependency>
    <dependency>
      <groupId>org.jboss.arquillian.protocol</groupId>
      <artifactId>arquillian-protocol-jmx</artifactId>
      <version>${arquillian-version}</version>
    </dependency>
    <dependency>
      <groupId>org.jboss.arquillian.container</groupId>
      <artifactId>container-se-api</artifactId>
      <version>${arquillian-container-se-managed-version}</version>
    </dependency>
    <dependency>
      <groupId>org.jboss.arquillian.container</groupId>
      <artifactId>container-se-server</artifactId>
      <version>${arquillian-container-se-managed-version}</version>
    </dependency>

    <dependency>
      <groupId>org.jboss.shrinkwrap.resolver</groupId>
      <artifactId>shrinkwrap-resolver-api</artifactId>
      <version>${shrinkwrap-resolver-version}</version>
      <scope>test</scope>
    </dependency>

    <dependency>
      <groupId>org.jboss.shrinkwrap.resolver</groupId>
      <artifactId>shrinkwrap-resolver-spi</artifactId>
      <version>${shrinkwrap-resolver-version}</version>
      <scope>test</scope>
    </dependency>

    <dependency>
      <groupId>org.jboss.shrinkwrap.resolver</groupId>
      <artifactId>shrinkwrap-resolver-api-maven</artifactId>
      <version>${shrinkwrap-resolver-version}</version>
      <scope>test</scope>
    </dependency>

    <dependency>
      <groupId>org.jboss.shrinkwrap.resolver</groupId>
      <artifactId>shrinkwrap-resolver-spi-maven</artifactId>
      <version>${shrinkwrap-resolver-version}</version>
      <scope>test</scope>
    </dependency>

    <dependency>
      <groupId>org.jboss.shrinkwrap.resolver</groupId>
      <artifactId>shrinkwrap-resolver-api-maven-archive</artifactId>
      <version>${shrinkwrap-resolver-version}</version>
      <scope>test</scope>
    </dependency>

    <dependency>
      <groupId>org.jboss.shrinkwrap.resolver</groupId>
      <artifactId>shrinkwrap-resolver-impl-maven</artifactId>
      <version>${shrinkwrap-resolver-version}</version>
      <scope>test</scope>
    </dependency>

    <dependency>
      <groupId>org.jboss.shrinkwrap.resolver</groupId>
      <artifactId>shrinkwrap-resolver-impl-maven-archive</artifactId>
      <version>${shrinkwrap-resolver-version}</version>
      <scope>test</scope>
    </dependency>

  </dependencies>

  <build>
    <plugins>
      <plugin>
        <artifactId>maven-surefire-plugin</artifactId>
        <configuration>
          <childDelegation>false</childDelegation>
          <forkedProcessTimeoutInSeconds>15000</forkedProcessTimeoutInSeconds>
          <rerunFailingTestsCount>1</rerunFailingTestsCount>
          <includes>
            <!--<include>**/*Test.java</include>-->

            <include>org.apache.camel.itest.springboot.CamelNetty4Test</include>
            <include>org.apache.camel.itest.springboot.CamelNettyHttpTest</include>
            <include>org.apache.camel.itest.springboot.CamelNettyTest</include>
            <include>org.apache.camel.itest.springboot.CamelOgnlTest</include>
            <include>org.apache.camel.itest.springboot.CamelOlingo2Test</include>
            <include>org.apache.camel.itest.springboot.CamelOpenshiftTest</include>
            <include>org.apache.camel.itest.springboot.CamelOptaplannerTest</include>
            <include>org.apache.camel.itest.springboot.CamelPahoTest</include>
            <include>org.apache.camel.itest.springboot.CamelPdfTest</include>
            <include>org.apache.camel.itest.springboot.CamelPgeventTest</include>
            <include>org.apache.camel.itest.springboot.CamelPrinterTest</include>
            <include>org.apache.camel.itest.springboot.CamelProtobufTest</include>
            <include>org.apache.camel.itest.springboot.CamelQuartz2Test</include>
            <include>org.apache.camel.itest.springboot.CamelQuartzTest</include>
            <include>org.apache.camel.itest.springboot.CamelQuickfixTest</include>
            <include>org.apache.camel.itest.springboot.CamelRabbitmqTest</include>
            <include>org.apache.camel.itest.springboot.CamelRestletTest</include>
            <include>org.apache.camel.itest.springboot.CamelRibbonTest</include>
            <include>org.apache.camel.itest.springboot.CamelRmiTest</include>
            <include>org.apache.camel.itest.springboot.CamelRouteboxTest</include>
            <include>org.apache.camel.itest.springboot.CamelRssTest</include>
            <include>org.apache.camel.itest.springboot.CamelRubyTest</include>
            <include>org.apache.camel.itest.springboot.CamelRxTest</include>
            <include>org.apache.camel.itest.springboot.CamelSalesforceTest</include>
            <include>org.apache.camel.itest.springboot.CamelSapNetweaverTest</include>
            <include>org.apache.camel.itest.springboot.CamelSaxonTest</include>
            <include>org.apache.camel.itest.springboot.CamelScalaTest</include>
            <include>org.apache.camel.itest.springboot.CamelSchematronTest</include>
            <include>org.apache.camel.itest.springboot.CamelScriptTest</include>
            <include>org.apache.camel.itest.springboot.CamelScrTest</include>
            <include>org.apache.camel.itest.springboot.CamelServicenowTest</include>
            <include>org.apache.camel.itest.springboot.CamelServletlistenerTest</include>
            <include>org.apache.camel.itest.springboot.CamelServletTest</include>
            <include>org.apache.camel.itest.springboot.CamelShiroTest</include>
            <include>org.apache.camel.itest.springboot.CamelSipTest</include>
            <include>org.apache.camel.itest.springboot.CamelSjmsTest</include>
            <include>org.apache.camel.itest.springboot.CamelSlackTest</include>
            <include>org.apache.camel.itest.springboot.CamelSmppTest</include>
            <include>org.apache.camel.itest.springboot.CamelSnakeyamlTest</include>
            <include>org.apache.camel.itest.springboot.CamelSnmpTest</include>
            <include>org.apache.camel.itest.springboot.CamelSoapTest</include>
            <include>org.apache.camel.itest.springboot.CamelSolrTest</include>
            <include>org.apache.camel.itest.springboot.CamelSparkRestTest</include>
            <include>org.apache.camel.itest.springboot.CamelSparkTest</include>
            <include>org.apache.camel.itest.springboot.CamelSplunkTest</include>
            <include>org.apache.camel.itest.springboot.CamelSpringBatchTest</include>
            <include>org.apache.camel.itest.springboot.CamelSpringBootTest</include>
            <include>org.apache.camel.itest.springboot.CamelSpringDmTest</include>
            <include>org.apache.camel.itest.springboot.CamelSpringIntegrationTest</include>
            <include>org.apache.camel.itest.springboot.CamelSpringJavaconfigTest</include>
            <include>org.apache.camel.itest.springboot.CamelSpringLdapTest</include>
            <include>org.apache.camel.itest.springboot.CamelSpringRedisTest</include>
            <include>org.apache.camel.itest.springboot.CamelSpringSecurityTest</include>
            <include>org.apache.camel.itest.springboot.CamelSpringTest</include>
            <include>org.apache.camel.itest.springboot.CamelSpringWsTest</include>
            <include>org.apache.camel.itest.springboot.CamelSqlTest</include>
            <include>org.apache.camel.itest.springboot.CamelSshTest</include>
            <include>org.apache.camel.itest.springboot.CamelStaxTest</include>
            <include>org.apache.camel.itest.springboot.CamelStompTest</include>
            <include>org.apache.camel.itest.springboot.CamelStreamTest</include>
            <include>org.apache.camel.itest.springboot.CamelStringtemplateTest</include>
            <include>org.apache.camel.itest.springboot.CamelSwaggerJavaTest</include>
            <include>org.apache.camel.itest.springboot.CamelSyslogTest</include>
            <include>org.apache.camel.itest.springboot.CamelTagsoupTest</include>
            <include>org.apache.camel.itest.springboot.CamelTarfileTest</include>
            <include>org.apache.camel.itest.springboot.CamelTelegramTest</include>
            <include>org.apache.camel.itest.springboot.CamelTestngTest</include>
            <include>org.apache.camel.itest.springboot.CamelTestTest</include>
            <include>org.apache.camel.itest.springboot.CamelTwitterTest</include>
            <include>org.apache.camel.itest.springboot.CamelUndertowTest</include>
            <include>org.apache.camel.itest.springboot.CamelUnivocityParsersTest</include>
            <include>org.apache.camel.itest.springboot.CamelUrlrewriteTest</include>
            <include>org.apache.camel.itest.springboot.CamelVelocityTest</include>
            <include>org.apache.camel.itest.springboot.CamelVertxTest</include>
            <include>org.apache.camel.itest.springboot.CamelWeatherTest</include>
            <include>org.apache.camel.itest.springboot.CamelWebsocketTest</include>
            <include>org.apache.camel.itest.springboot.CamelXmlbeansTest</include>
            <include>org.apache.camel.itest.springboot.CamelXmljsonTest</include>
            <include>org.apache.camel.itest.springboot.CamelXmlrpcTest</include>
            <include>org.apache.camel.itest.springboot.CamelXmlsecurityTest</include>
            <include>org.apache.camel.itest.springboot.CamelXmppTest</include>
            <include>org.apache.camel.itest.springboot.CamelXstreamTest</include>
            <include>org.apache.camel.itest.springboot.CamelYammerTest</include>
            <include>org.apache.camel.itest.springboot.CamelZipfileTest</include>
            <include>org.apache.camel.itest.springboot.CamelZipkinTest</include>
            <include>org.apache.camel.itest.springboot.CamelZookeeperTest</include>

          </includes>
          <systemProperties>
            <!-- Test configuration -->
            <!--
            It is better disabling unit testing in surefire, as some of them fail for various reasons
            (unrelated to spring-boot) when running in the arquillian jar.

            Tests are enabled when running from IDE. See org.apache.camel.itest.springboot.ITestConfigBuilder
            for property names and defaults values.
            -->
            <property>
              <name>itest.springboot.unitTestEnabled</name>
              <value>true</value>
            </property>
            <property>
              <name>itest.springboot.includeTestDependencies</name>
              <value>true</value>
            </property>
            <property>
              <name>itest.springboot.mavenOfflineResolution</name>
              <value>false</value>
            </property>

          </systemProperties>
        </configuration>
      </plugin>
    </plugins>
  </build>

</project>
