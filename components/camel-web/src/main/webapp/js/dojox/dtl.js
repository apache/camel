/*
	Copyright (c) 2004-2009, The Dojo Foundation All Rights Reserved.
	Available via Academic Free License >= 2.1 OR the modified BSD license.
	see: http://dojotoolkit.org/license for details
*/

/*
	This is a compiled version of Dojo, built for deployment and not for
	development. To get an editable version, please visit:

		http://dojotoolkit.org

	for documentation and information on getting the source.
*/

if(!dojo._hasResource["dojox.string.Builder"]){dojo._hasResource["dojox.string.Builder"]=true;dojo.provide("dojox.string.Builder");dojox.string.Builder=function(_1){var b="";this.length=0;this.append=function(s){if(arguments.length>1){var _4="",l=arguments.length;switch(l){case 9:_4=""+arguments[8]+_4;case 8:_4=""+arguments[7]+_4;case 7:_4=""+arguments[6]+_4;case 6:_4=""+arguments[5]+_4;case 5:_4=""+arguments[4]+_4;case 4:_4=""+arguments[3]+_4;case 3:_4=""+arguments[2]+_4;case 2:b+=""+arguments[0]+arguments[1]+_4;break;default:var i=0;while(i<arguments.length){_4+=arguments[i++];}b+=_4;}}else{b+=s;}this.length=b.length;return this;};this.concat=function(s){return this.append.apply(this,arguments);};this.appendArray=function(_8){return this.append.apply(this,_8);};this.clear=function(){b="";this.length=0;return this;};this.replace=function(_9,_a){b=b.replace(_9,_a);this.length=b.length;return this;};this.remove=function(_b,_c){if(_c===undefined){_c=b.length;}if(_c==0){return this;}b=b.substr(0,_b)+b.substr(_b+_c);this.length=b.length;return this;};this.insert=function(_d,_e){if(_d==0){b=_e+b;}else{b=b.slice(0,_d)+_e+b.slice(_d);}this.length=b.length;return this;};this.toString=function(){return b;};if(_1){this.append(_1);}};}if(!dojo._hasResource["dojox.string.tokenize"]){dojo._hasResource["dojox.string.tokenize"]=true;dojo.provide("dojox.string.tokenize");dojox.string.tokenize=function(_f,re,_11,_12){var _13=[];var _14,_15,_16=0;while(_14=re.exec(_f)){_15=_f.slice(_16,re.lastIndex-_14[0].length);if(_15.length){_13.push(_15);}if(_11){if(dojo.isOpera){var _17=_14.slice(0);while(_17.length<_14.length){_17.push(null);}_14=_17;}var _18=_11.apply(_12,_14.slice(1).concat(_13.length));if(typeof _18!="undefined"){_13.push(_18);}}_16=re.lastIndex;}_15=_f.slice(_16);if(_15.length){_13.push(_15);}return _13;};}if(!dojo._hasResource["dojox.dtl._base"]){dojo._hasResource["dojox.dtl._base"]=true;dojo.provide("dojox.dtl._base");dojo.experimental("dojox.dtl");(function(){var dd=dojox.dtl;dd.TOKEN_BLOCK=-1;dd.TOKEN_VAR=-2;dd.TOKEN_COMMENT=-3;dd.TOKEN_TEXT=3;dd._Context=dojo.extend(function(_1a){dojo._mixin(this,_1a||{});this._dicts=[];},{push:function(){var _1b=this;var _1c=dojo.delegate(this);_1c.pop=function(){return _1b;};return _1c;},pop:function(){throw new Error("pop() called on empty Context");},get:function(key,_1e){if(typeof this[key]!="undefined"){return this._normalize(this[key]);}for(var i=0,_20;_20=this._dicts[i];i++){if(typeof _20[key]!="undefined"){return this._normalize(_20[key]);}}return _1e;},_normalize:function(_21){if(_21 instanceof Date){_21.year=_21.getFullYear();_21.month=_21.getMonth()+1;_21.day=_21.getDate();_21.date=_21.year+"-"+("0"+_21.month).slice(-2)+"-"+("0"+_21.day).slice(-2);_21.hour=_21.getHours();_21.minute=_21.getMinutes();_21.second=_21.getSeconds();_21.microsecond=_21.getMilliseconds();}return _21;},update:function(_22){var _23=this.push();if(_22){dojo._mixin(this,_22);}return _23;}});var _24=/("(?:[^"\\]*(?:\\.[^"\\]*)*)"|'(?:[^'\\]*(?:\\.[^'\\]*)*)'|[^\s]+)/g;var _25=/\s+/g;var _26=function(_27,_28){_27=_27||_25;if(!(_27 instanceof RegExp)){_27=new RegExp(_27,"g");}if(!_27.global){throw new Error("You must use a globally flagged RegExp with split "+_27);}_27.exec("");var _29,_2a=[],_2b=0,i=0;while(_29=_27.exec(this)){_2a.push(this.slice(_2b,_27.lastIndex-_29[0].length));_2b=_27.lastIndex;if(_28&&(++i>_28-1)){break;}}_2a.push(this.slice(_2b));return _2a;};dd.Token=function(_2d,_2e){this.token_type=_2d;this.contents=new String(dojo.trim(_2e));this.contents.split=_26;this.split=function(){return String.prototype.split.apply(this.contents,arguments);};};dd.Token.prototype.split_contents=function(_2f){var bit,_31=[],i=0;_2f=_2f||999;while(i++<_2f&&(bit=_24.exec(this.contents))){bit=bit[0];if(bit.charAt(0)=="\""&&bit.slice(-1)=="\""){_31.push("\""+bit.slice(1,-1).replace("\\\"","\"").replace("\\\\","\\")+"\"");}else{if(bit.charAt(0)=="'"&&bit.slice(-1)=="'"){_31.push("'"+bit.slice(1,-1).replace("\\'","'").replace("\\\\","\\")+"'");}else{_31.push(bit);}}}return _31;};var ddt=dd.text={_get:function(_34,_35,_36){var _37=dd.register.get(_34,_35.toLowerCase(),_36);if(!_37){if(!_36){throw new Error("No tag found for "+_35);}return null;}var fn=_37[1];var _39=_37[2];var _3a;if(fn.indexOf(":")!=-1){_3a=fn.split(":");fn=_3a.pop();}dojo["require"](_39);var _3b=dojo.getObject(_39);return _3b[fn||_35]||_3b[_35+"_"]||_3b[fn+"_"];},getTag:function(_3c,_3d){return ddt._get("tag",_3c,_3d);},getFilter:function(_3e,_3f){return ddt._get("filter",_3e,_3f);},getTemplate:function(_40){return new dd.Template(ddt.getTemplateString(_40));},getTemplateString:function(_41){return dojo._getText(_41.toString())||"";},_resolveLazy:function(_42,_43,_44){if(_43){if(_44){return dojo.fromJson(dojo._getText(_42))||{};}else{return dd.text.getTemplateString(_42);}}else{return dojo.xhrGet({handleAs:(_44)?"json":"text",url:_42});}},_resolveTemplateArg:function(arg,_46){if(ddt._isTemplate(arg)){if(!_46){var d=new dojo.Deferred();d.callback(arg);return d;}return arg;}return ddt._resolveLazy(arg,_46);},_isTemplate:function(arg){return (typeof arg=="undefined")||(typeof arg=="string"&&(arg.match(/^\s*[<{]/)||arg.indexOf(" ")!=-1));},_resolveContextArg:function(arg,_4a){if(arg.constructor==Object){if(!_4a){var d=new dojo.Deferred;d.callback(arg);return d;}return arg;}return ddt._resolveLazy(arg,_4a,true);},_re:/(?:\{\{\s*(.+?)\s*\}\}|\{%\s*(load\s*)?(.+?)\s*%\})/g,tokenize:function(str){return dojox.string.tokenize(str,ddt._re,ddt._parseDelims);},_parseDelims:function(_4d,_4e,tag){if(_4d){return [dd.TOKEN_VAR,_4d];}else{if(_4e){var _50=dojo.trim(tag).split(/\s+/g);for(var i=0,_52;_52=_50[i];i++){dojo["require"](_52);}}else{return [dd.TOKEN_BLOCK,tag];}}}};dd.Template=dojo.extend(function(_53,_54){var str=_54?_53:ddt._resolveTemplateArg(_53,true)||"";var _56=ddt.tokenize(str);var _57=new dd._Parser(_56);this.nodelist=_57.parse();},{update:function(_58,_59){return ddt._resolveContextArg(_59).addCallback(this,function(_5a){var _5b=this.render(new dd._Context(_5a));if(_58.forEach){_58.forEach(function(_5c){_5c.innerHTML=_5b;});}else{dojo.byId(_58).innerHTML=_5b;}return this;});},render:function(_5d,_5e){_5e=_5e||this.getBuffer();_5d=_5d||new dd._Context({});return this.nodelist.render(_5d,_5e)+"";},getBuffer:function(){return new dojox.string.Builder();}});var _5f=/\{\{\s*(.+?)\s*\}\}/g;dd.quickFilter=function(str){if(!str){return new dd._NodeList();}if(str.indexOf("{%")==-1){return new dd._QuickNodeList(dojox.string.tokenize(str,_5f,function(_61){return new dd._Filter(_61);}));}};dd._QuickNodeList=dojo.extend(function(_62){this.contents=_62;},{render:function(_63,_64){for(var i=0,l=this.contents.length;i<l;i++){if(this.contents[i].resolve){_64=_64.concat(this.contents[i].resolve(_63));}else{_64=_64.concat(this.contents[i]);}}return _64;},dummyRender:function(_67){return this.render(_67,dd.Template.prototype.getBuffer()).toString();},clone:function(_68){return this;}});dd._Filter=dojo.extend(function(_69){if(!_69){throw new Error("Filter must be called with variable name");}this.contents=_69;var _6a=this._cache[_69];if(_6a){this.key=_6a[0];this.filters=_6a[1];}else{this.filters=[];dojox.string.tokenize(_69,this._re,this._tokenize,this);this._cache[_69]=[this.key,this.filters];}},{_cache:{},_re:/(?:^_\("([^\\"]*(?:\\.[^\\"])*)"\)|^"([^\\"]*(?:\\.[^\\"]*)*)"|^([a-zA-Z0-9_.]+)|\|(\w+)(?::(?:_\("([^\\"]*(?:\\.[^\\"])*)"\)|"([^\\"]*(?:\\.[^\\"]*)*)"|([a-zA-Z0-9_.]+)|'([^\\']*(?:\\.[^\\']*)*)'))?|^'([^\\']*(?:\\.[^\\']*)*)')/g,_values:{0:"\"",1:"\"",2:"",8:"\""},_args:{4:"\"",5:"\"",6:"",7:"'"},_tokenize:function(){var pos,arg;for(var i=0,has=[];i<arguments.length;i++){has[i]=(typeof arguments[i]!="undefined"&&typeof arguments[i]=="string"&&arguments[i]);}if(!this.key){for(pos in this._values){if(has[pos]){this.key=this._values[pos]+arguments[pos]+this._values[pos];break;}}}else{for(pos in this._args){if(has[pos]){var _6f=arguments[pos];if(this._args[pos]=="'"){_6f=_6f.replace(/\\'/g,"'");}else{if(this._args[pos]=="\""){_6f=_6f.replace(/\\"/g,"\"");}}arg=[!this._args[pos],_6f];break;}}var fn=ddt.getFilter(arguments[3]);if(!dojo.isFunction(fn)){throw new Error(arguments[3]+" is not registered as a filter");}this.filters.push([fn,arg]);}},getExpression:function(){return this.contents;},resolve:function(_71){if(typeof this.key=="undefined"){return "";}var str=this.resolvePath(this.key,_71);for(var i=0,_74;_74=this.filters[i];i++){if(_74[1]){if(_74[1][0]){str=_74[0](str,this.resolvePath(_74[1][1],_71));}else{str=_74[0](str,_74[1][1]);}}else{str=_74[0](str);}}return str;},resolvePath:function(_75,_76){var _77,_78;var _79=_75.charAt(0);var _7a=_75.slice(-1);if(!isNaN(parseInt(_79))){_77=(_75.indexOf(".")==-1)?parseInt(_75):parseFloat(_75);}else{if(_79=="\""&&_79==_7a){_77=_75.slice(1,-1);}else{if(_75=="true"){return true;}if(_75=="false"){return false;}if(_75=="null"||_75=="None"){return null;}_78=_75.split(".");_77=_76.get(_78[0]);if(dojo.isFunction(_77)){var _7b=_76.getThis&&_76.getThis();if(_77.alters_data){_77="";}else{if(_7b){_77=_77.call(_7b);}else{_77="";}}}for(var i=1;i<_78.length;i++){var _7d=_78[i];if(_77){var _7e=_77;if(dojo.isObject(_77)&&_7d=="items"&&typeof _77[_7d]=="undefined"){var _7f=[];for(var key in _77){_7f.push([key,_77[key]]);}_77=_7f;continue;}if(_77.get&&dojo.isFunction(_77.get)&&_77.get.safe){_77=_77.get(_7d);}else{if(typeof _77[_7d]=="undefined"){_77=_77[_7d];break;}else{_77=_77[_7d];}}if(dojo.isFunction(_77)){if(_77.alters_data){_77="";}else{_77=_77.call(_7e);}}else{if(_77 instanceof Date){_77=dd._Context.prototype._normalize(_77);}}}else{return "";}}}}return _77;}});dd._TextNode=dd._Node=dojo.extend(function(obj){this.contents=obj;},{set:function(_82){this.contents=_82;return this;},render:function(_83,_84){return _84.concat(this.contents);},isEmpty:function(){return !dojo.trim(this.contents);},clone:function(){return this;}});dd._NodeList=dojo.extend(function(_85){this.contents=_85||[];this.last="";},{push:function(_86){this.contents.push(_86);return this;},concat:function(_87){this.contents=this.contents.concat(_87);return this;},render:function(_88,_89){for(var i=0;i<this.contents.length;i++){_89=this.contents[i].render(_88,_89);if(!_89){throw new Error("Template must return buffer");}}return _89;},dummyRender:function(_8b){return this.render(_8b,dd.Template.prototype.getBuffer()).toString();},unrender:function(){return arguments[1];},clone:function(){return this;},rtrim:function(){while(1){i=this.contents.length-1;if(this.contents[i] instanceof dd._TextNode&&this.contents[i].isEmpty()){this.contents.pop();}else{break;}}return this;}});dd._VarNode=dojo.extend(function(str){this.contents=new dd._Filter(str);},{render:function(_8d,_8e){var str=this.contents.resolve(_8d);if(!str.safe){str=dd._base.escape(""+str);}return _8e.concat(str);}});dd._noOpNode=new function(){this.render=this.unrender=function(){return arguments[1];};this.clone=function(){return this;};};dd._Parser=dojo.extend(function(_90){this.contents=_90;},{i:0,parse:function(_91){var _92={};_91=_91||[];for(var i=0;i<_91.length;i++){_92[_91[i]]=true;}var _94=new dd._NodeList();while(this.i<this.contents.length){token=this.contents[this.i++];if(typeof token=="string"){_94.push(new dd._TextNode(token));}else{var _95=token[0];var _96=token[1];if(_95==dd.TOKEN_VAR){_94.push(new dd._VarNode(_96));}else{if(_95==dd.TOKEN_BLOCK){if(_92[_96]){--this.i;return _94;}var cmd=_96.split(/\s+/g);if(cmd.length){cmd=cmd[0];var fn=ddt.getTag(cmd);if(fn){_94.push(fn(this,new dd.Token(_95,_96)));}}}}}}if(_91.length){throw new Error("Could not find closing tag(s): "+_91.toString());}this.contents.length=0;return _94;},next_token:function(){var _99=this.contents[this.i++];return new dd.Token(_99[0],_99[1]);},delete_first_token:function(){this.i++;},skip_past:function(_9a){while(this.i<this.contents.length){var _9b=this.contents[this.i++];if(_9b[0]==dd.TOKEN_BLOCK&&_9b[1]==_9a){return;}}throw new Error("Unclosed tag found when looking for "+_9a);},create_variable_node:function(_9c){return new dd._VarNode(_9c);},create_text_node:function(_9d){return new dd._TextNode(_9d||"");},getTemplate:function(_9e){return new dd.Template(_9e);}});dd.register={_registry:{attributes:[],tags:[],filters:[]},get:function(_9f,_a0){var _a1=dd.register._registry[_9f+"s"];for(var i=0,_a3;_a3=_a1[i];i++){if(typeof _a3[0]=="string"){if(_a3[0]==_a0){return _a3;}}else{if(_a0.match(_a3[0])){return _a3;}}}},getAttributeTags:function(){var _a4=[];var _a5=dd.register._registry.attributes;for(var i=0,_a7;_a7=_a5[i];i++){if(_a7.length==3){_a4.push(_a7);}else{var fn=dojo.getObject(_a7[1]);if(fn&&dojo.isFunction(fn)){_a7.push(fn);_a4.push(_a7);}}}return _a4;},_any:function(_a9,_aa,_ab){for(var _ac in _ab){for(var i=0,fn;fn=_ab[_ac][i];i++){var key=fn;if(dojo.isArray(fn)){key=fn[0];fn=fn[1];}if(typeof key=="string"){if(key.substr(0,5)=="attr:"){var _b0=fn.toLowerCase();if(_b0.substr(0,5)=="attr:"){_b0=_b0.slice(5);}dd.register._registry.attributes.push([_b0,_aa+"."+_ac+"."+_b0]);}key=key.toLowerCase();}dd.register._registry[_a9].push([key,fn,_aa+"."+_ac]);}}},tags:function(_b1,_b2){dd.register._any("tags",_b1,_b2);},filters:function(_b3,_b4){dd.register._any("filters",_b3,_b4);}};var _b5=/&/g;var _b6=/</g;var _b7=/>/g;var _b8=/'/g;var _b9=/"/g;dd._base.escape=function(_ba){return dd.mark_safe(_ba.replace(_b5,"&amp;").replace(_b6,"&lt;").replace(_b7,"&gt;").replace(_b9,"&quot;").replace(_b8,"&#39;"));};dd._base.safe=function(_bb){if(typeof _bb=="string"){_bb=new String(_bb);}if(typeof _bb=="object"){_bb.safe=true;}return _bb;};dd.mark_safe=dd._base.safe;dd.register.tags("dojox.dtl.tag",{"date":["now"],"logic":["if","for","ifequal","ifnotequal"],"loader":["extends","block","include","load","ssi"],"misc":["comment","debug","filter","firstof","spaceless","templatetag","widthratio","with"],"loop":["cycle","ifchanged","regroup"]});dd.register.filters("dojox.dtl.filter",{"dates":["date","time","timesince","timeuntil"],"htmlstrings":["linebreaks","linebreaksbr","removetags","striptags"],"integers":["add","get_digit"],"lists":["dictsort","dictsortreversed","first","join","length","length_is","random","slice","unordered_list"],"logic":["default","default_if_none","divisibleby","yesno"],"misc":["filesizeformat","pluralize","phone2numeric","pprint"],"strings":["addslashes","capfirst","center","cut","fix_ampersands","floatformat","iriencode","linenumbers","ljust","lower","make_list","rjust","slugify","stringformat","title","truncatewords","truncatewords_html","upper","urlencode","urlize","urlizetrunc","wordcount","wordwrap"]});dd.register.filters("dojox.dtl",{"_base":["escape","safe"]});})();}if(!dojo._hasResource["dojox.dtl"]){dojo._hasResource["dojox.dtl"]=true;dojo.provide("dojox.dtl");}if(!dojo._hasResource["dojox.dtl.Context"]){dojo._hasResource["dojox.dtl.Context"]=true;dojo.provide("dojox.dtl.Context");dojox.dtl.Context=dojo.extend(function(_bc){this._this={};dojox.dtl._Context.call(this,_bc);},dojox.dtl._Context.prototype,{getKeys:function(){var _bd=[];for(var key in this){if(this.hasOwnProperty(key)&&key!="_dicts"&&key!="_this"){_bd.push(key);}}return _bd;},extend:function(obj){return dojo.delegate(this,obj);},filter:function(_c0){var _c1=new dojox.dtl.Context();var _c2=[];var i,arg;if(_c0 instanceof dojox.dtl.Context){_c2=_c0.getKeys();}else{if(typeof _c0=="object"){for(var key in _c0){_c2.push(key);}}else{for(i=0;arg=arguments[i];i++){if(typeof arg=="string"){_c2.push(arg);}}}}for(i=0,key;key=_c2[i];i++){_c1[key]=this[key];}return _c1;},setThis:function(_c6){this._this=_c6;},getThis:function(){return this._this;},hasKey:function(key){if(typeof this[key]!="undefined"){return true;}for(var i=0,_c9;_c9=this._dicts[i];i++){if(typeof _c9[key]!="undefined"){return true;}}return false;}});}if(!dojo._hasResource["dojox.dtl.tag.logic"]){dojo._hasResource["dojox.dtl.tag.logic"]=true;dojo.provide("dojox.dtl.tag.logic");(function(){var dd=dojox.dtl;var ddt=dd.text;var _cc=dd.tag.logic;_cc.IfNode=dojo.extend(function(_cd,_ce,_cf,_d0){this.bools=_cd;this.trues=_ce;this.falses=_cf;this.type=_d0;},{render:function(_d1,_d2){var i,_d4,_d5,_d6,_d7;if(this.type=="or"){for(i=0;_d4=this.bools[i];i++){_d5=_d4[0];_d6=_d4[1];_d7=_d6.resolve(_d1);if((_d7&&!_d5)||(_d5&&!_d7)){if(this.falses){_d2=this.falses.unrender(_d1,_d2);}return (this.trues)?this.trues.render(_d1,_d2,this):_d2;}}if(this.trues){_d2=this.trues.unrender(_d1,_d2);}return (this.falses)?this.falses.render(_d1,_d2,this):_d2;}else{for(i=0;_d4=this.bools[i];i++){_d5=_d4[0];_d6=_d4[1];_d7=_d6.resolve(_d1);if(_d7==_d5){if(this.trues){_d2=this.trues.unrender(_d1,_d2);}return (this.falses)?this.falses.render(_d1,_d2,this):_d2;}}if(this.falses){_d2=this.falses.unrender(_d1,_d2);}return (this.trues)?this.trues.render(_d1,_d2,this):_d2;}return _d2;},unrender:function(_d8,_d9){_d9=(this.trues)?this.trues.unrender(_d8,_d9):_d9;_d9=(this.falses)?this.falses.unrender(_d8,_d9):_d9;return _d9;},clone:function(_da){var _db=(this.trues)?this.trues.clone(_da):null;var _dc=(this.falses)?this.falses.clone(_da):null;return new this.constructor(this.bools,_db,_dc,this.type);}});_cc.IfEqualNode=dojo.extend(function(_dd,_de,_df,_e0,_e1){this.var1=new dd._Filter(_dd);this.var2=new dd._Filter(_de);this.trues=_df;this.falses=_e0;this.negate=_e1;},{render:function(_e2,_e3){var _e4=this.var1.resolve(_e2);var _e5=this.var2.resolve(_e2);_e4=(typeof _e4!="undefined")?_e4:"";_e5=(typeof _e4!="undefined")?_e5:"";if((this.negate&&_e4!=_e5)||(!this.negate&&_e4==_e5)){if(this.falses){_e3=this.falses.unrender(_e2,_e3,this);}return (this.trues)?this.trues.render(_e2,_e3,this):_e3;}if(this.trues){_e3=this.trues.unrender(_e2,_e3,this);}return (this.falses)?this.falses.render(_e2,_e3,this):_e3;},unrender:function(_e6,_e7){return _cc.IfNode.prototype.unrender.call(this,_e6,_e7);},clone:function(_e8){var _e9=this.trues?this.trues.clone(_e8):null;var _ea=this.falses?this.falses.clone(_e8):null;return new this.constructor(this.var1.getExpression(),this.var2.getExpression(),_e9,_ea,this.negate);}});_cc.ForNode=dojo.extend(function(_eb,_ec,_ed,_ee){this.assign=_eb;this.loop=new dd._Filter(_ec);this.reversed=_ed;this.nodelist=_ee;this.pool=[];},{render:function(_ef,_f0){var i,j,k;var _f4=false;var _f5=this.assign;for(k=0;k<_f5.length;k++){if(typeof _ef[_f5[k]]!="undefined"){_f4=true;_ef=_ef.push();break;}}if(!_f4&&_ef.forloop){_f4=true;_ef=_ef.push();}var _f6=this.loop.resolve(_ef)||[];for(i=_f6.length;i<this.pool.length;i++){this.pool[i].unrender(_ef,_f0,this);}if(this.reversed){_f6=_f6.slice(0).reverse();}var _f7=dojo.isObject(_f6)&&!dojo.isArrayLike(_f6);var _f8=[];if(_f7){for(var key in _f6){_f8.push(_f6[key]);}}else{_f8=_f6;}var _fa=_ef.forloop={parentloop:_ef.get("forloop",{})};var j=0;for(i=0;i<_f8.length;i++){var _fb=_f8[i];_fa.counter0=j;_fa.counter=j+1;_fa.revcounter0=_f8.length-j-1;_fa.revcounter=_f8.length-j;_fa.first=!j;_fa.last=(j==_f8.length-1);if(_f5.length>1&&dojo.isArrayLike(_fb)){if(!_f4){_f4=true;_ef=_ef.push();}var _fc={};for(k=0;k<_fb.length&&k<_f5.length;k++){_fc[_f5[k]]=_fb[k];}dojo.mixin(_ef,_fc);}else{_ef[_f5[0]]=_fb;}if(j+1>this.pool.length){this.pool.push(this.nodelist.clone(_f0));}_f0=this.pool[j++].render(_ef,_f0,this);}delete _ef.forloop;if(_f4){_ef=_ef.pop();}else{for(k=0;k<_f5.length;k++){delete _ef[_f5[k]];}}return _f0;},unrender:function(_fd,_fe){for(var i=0,pool;pool=this.pool[i];i++){_fe=pool.unrender(_fd,_fe);}return _fe;},clone:function(_101){return new this.constructor(this.assign,this.loop.getExpression(),this.reversed,this.nodelist.clone(_101));}});dojo.mixin(_cc,{if_:function(_102,_103){var i,part,type,_107=[],_108=_103.contents.split();_108.shift();_103=_108.join(" ");_108=_103.split(" and ");if(_108.length==1){type="or";_108=_103.split(" or ");}else{type="and";for(i=0;i<_108.length;i++){if(_108[i].indexOf(" or ")!=-1){throw new Error("'if' tags can't mix 'and' and 'or'");}}}for(i=0;part=_108[i];i++){var not=false;if(part.indexOf("not ")==0){part=part.slice(4);not=true;}_107.push([not,new dd._Filter(part)]);}var _10a=_102.parse(["else","endif"]);var _10b=false;var _103=_102.next_token();if(_103.contents=="else"){_10b=_102.parse(["endif"]);_102.next_token();}return new _cc.IfNode(_107,_10a,_10b,type);},_ifequal:function(_10c,_10d,_10e){var _10f=_10d.split_contents();if(_10f.length!=3){throw new Error(_10f[0]+" takes two arguments");}var end="end"+_10f[0];var _111=_10c.parse(["else",end]);var _112=false;var _10d=_10c.next_token();if(_10d.contents=="else"){_112=_10c.parse([end]);_10c.next_token();}return new _cc.IfEqualNode(_10f[1],_10f[2],_111,_112,_10e);},ifequal:function(_113,_114){return _cc._ifequal(_113,_114);},ifnotequal:function(_115,_116){return _cc._ifequal(_115,_116,true);},for_:function(_117,_118){var _119=_118.contents.split();if(_119.length<4){throw new Error("'for' statements should have at least four words: "+_118.contents);}var _11a=_119[_119.length-1]=="reversed";var _11b=(_11a)?-3:-2;if(_119[_119.length+_11b]!="in"){throw new Error("'for' tag received an invalid argument: "+_118.contents);}var _11c=_119.slice(1,_11b).join(" ").split(/ *, */);for(var i=0;i<_11c.length;i++){if(!_11c[i]||_11c[i].indexOf(" ")!=-1){throw new Error("'for' tag received an invalid argument: "+_118.contents);}}var _11e=_117.parse(["endfor"]);_117.next_token();return new _cc.ForNode(_11c,_119[_119.length+_11b+1],_11a,_11e);}});})();}if(!dojo._hasResource["dojox.dtl.tag.loop"]){dojo._hasResource["dojox.dtl.tag.loop"]=true;dojo.provide("dojox.dtl.tag.loop");(function(){var dd=dojox.dtl;var ddtl=dd.tag.loop;ddtl.CycleNode=dojo.extend(function(_121,name,text,_124){this.cyclevars=_121;this.name=name;this.contents=text;this.shared=_124||{counter:-1,map:{}};},{render:function(_125,_126){if(_125.forloop&&!_125.forloop.counter0){this.shared.counter=-1;}++this.shared.counter;var _127=this.cyclevars[this.shared.counter%this.cyclevars.length];var map=this.shared.map;if(!map[_127]){map[_127]=new dd._Filter(_127);}_127=map[_127].resolve(_125,_126);if(this.name){_125[this.name]=_127;}this.contents.set(_127);return this.contents.render(_125,_126);},unrender:function(_129,_12a){return this.contents.unrender(_129,_12a);},clone:function(_12b){return new this.constructor(this.cyclevars,this.name,this.contents.clone(_12b),this.shared);}});ddtl.IfChangedNode=dojo.extend(function(_12c,vars,_12e){this.nodes=_12c;this._vars=vars;this.shared=_12e||{last:null,counter:0};this.vars=dojo.map(vars,function(item){return new dojox.dtl._Filter(item);});},{render:function(_130,_131){if(_130.forloop){if(_130.forloop.counter<=this.shared.counter){this.shared.last=null;}this.shared.counter=_130.forloop.counter;}var _132;if(this.vars.length){_132=dojo.toJson(dojo.map(this.vars,function(item){return item.resolve(_130);}));}else{_132=this.nodes.dummyRender(_130,_131);}if(_132!=this.shared.last){var _134=(this.shared.last===null);this.shared.last=_132;_130=_130.push();_130.ifchanged={firstloop:_134};_131=this.nodes.render(_130,_131);_130=_130.pop();}else{_131=this.nodes.unrender(_130,_131);}return _131;},unrender:function(_135,_136){return this.nodes.unrender(_135,_136);},clone:function(_137){return new this.constructor(this.nodes.clone(_137),this._vars,this.shared);}});ddtl.RegroupNode=dojo.extend(function(_138,key,_13a){this._expression=_138;this.expression=new dd._Filter(_138);this.key=key;this.alias=_13a;},{_push:function(_13b,_13c,_13d){if(_13d.length){_13b.push({grouper:_13c,list:_13d});}},render:function(_13e,_13f){_13e[this.alias]=[];var list=this.expression.resolve(_13e);if(list){var last=null;var _142=[];for(var i=0;i<list.length;i++){var id=list[i][this.key];if(last!==id){this._push(_13e[this.alias],last,_142);last=id;_142=[list[i]];}else{_142.push(list[i]);}}this._push(_13e[this.alias],last,_142);}return _13f;},unrender:function(_145,_146){return _146;},clone:function(_147,_148){return this;}});dojo.mixin(ddtl,{cycle:function(_149,_14a){var args=_14a.split_contents();if(args.length<2){throw new Error("'cycle' tag requires at least two arguments");}if(args[1].indexOf(",")!=-1){var vars=args[1].split(",");args=[args[0]];for(var i=0;i<vars.length;i++){args.push("\""+vars[i]+"\"");}}if(args.length==2){var name=args[args.length-1];if(!_149._namedCycleNodes){throw new Error("No named cycles in template: '"+name+"' is not defined");}if(!_149._namedCycleNodes[name]){throw new Error("Named cycle '"+name+"' does not exist");}return _149._namedCycleNodes[name];}if(args.length>4&&args[args.length-2]=="as"){var name=args[args.length-1];var node=new ddtl.CycleNode(args.slice(1,args.length-2),name,_149.create_text_node());if(!_149._namedCycleNodes){_149._namedCycleNodes={};}_149._namedCycleNodes[name]=node;}else{node=new ddtl.CycleNode(args.slice(1),null,_149.create_text_node());}return node;},ifchanged:function(_150,_151){var _152=_151.contents.split();var _153=_150.parse(["endifchanged"]);_150.delete_first_token();return new ddtl.IfChangedNode(_153,_152.slice(1));},regroup:function(_154,_155){var _156=dojox.string.tokenize(_155.contents,/(\s+)/g,function(_157){return _157;});if(_156.length<11||_156[_156.length-3]!="as"||_156[_156.length-7]!="by"){throw new Error("Expected the format: regroup list by key as newList");}var _158=_156.slice(2,-8).join("");var key=_156[_156.length-5];var _15a=_156[_156.length-1];return new ddtl.RegroupNode(_158,key,_15a);}});})();}if(!dojo._hasResource["dojo.date"]){dojo._hasResource["dojo.date"]=true;dojo.provide("dojo.date");dojo.date.getDaysInMonth=function(_15b){var _15c=_15b.getMonth();var days=[31,28,31,30,31,30,31,31,30,31,30,31];if(_15c==1&&dojo.date.isLeapYear(_15b)){return 29;}return days[_15c];};dojo.date.isLeapYear=function(_15e){var year=_15e.getFullYear();return !(year%400)||(!(year%4)&&!!(year%100));};dojo.date.getTimezoneName=function(_160){var str=_160.toString();var tz="";var _163;var pos=str.indexOf("(");if(pos>-1){tz=str.substring(++pos,str.indexOf(")"));}else{var pat=/([A-Z\/]+) \d{4}$/;if((_163=str.match(pat))){tz=_163[1];}else{str=_160.toLocaleString();pat=/ ([A-Z\/]+)$/;if((_163=str.match(pat))){tz=_163[1];}}}return (tz=="AM"||tz=="PM")?"":tz;};dojo.date.compare=function(_166,_167,_168){_166=new Date(Number(_166));_167=new Date(Number(_167||new Date()));if(_168!=="undefined"){if(_168=="date"){_166.setHours(0,0,0,0);_167.setHours(0,0,0,0);}else{if(_168=="time"){_166.setFullYear(0,0,0);_167.setFullYear(0,0,0);}}}if(_166>_167){return 1;}if(_166<_167){return -1;}return 0;};dojo.date.add=function(date,_16a,_16b){var sum=new Date(Number(date));var _16d=false;var _16e="Date";switch(_16a){case "day":break;case "weekday":var days,_170;var mod=_16b%5;if(!mod){days=(_16b>0)?5:-5;_170=(_16b>0)?((_16b-5)/5):((_16b+5)/5);}else{days=mod;_170=parseInt(_16b/5);}var strt=date.getDay();var adj=0;if(strt==6&&_16b>0){adj=1;}else{if(strt==0&&_16b<0){adj=-1;}}var trgt=strt+days;if(trgt==0||trgt==6){adj=(_16b>0)?2:-2;}_16b=(7*_170)+days+adj;break;case "year":_16e="FullYear";_16d=true;break;case "week":_16b*=7;break;case "quarter":_16b*=3;case "month":_16d=true;_16e="Month";break;case "hour":case "minute":case "second":case "millisecond":_16e="UTC"+_16a.charAt(0).toUpperCase()+_16a.substring(1)+"s";}if(_16e){sum["set"+_16e](sum["get"+_16e]()+_16b);}if(_16d&&(sum.getDate()<date.getDate())){sum.setDate(0);}return sum;};dojo.date.difference=function(_175,_176,_177){_176=_176||new Date();_177=_177||"day";var _178=_176.getFullYear()-_175.getFullYear();var _179=1;switch(_177){case "quarter":var m1=_175.getMonth();var m2=_176.getMonth();var q1=Math.floor(m1/3)+1;var q2=Math.floor(m2/3)+1;q2+=(_178*4);_179=q2-q1;break;case "weekday":var days=Math.round(dojo.date.difference(_175,_176,"day"));var _17f=parseInt(dojo.date.difference(_175,_176,"week"));var mod=days%7;if(mod==0){days=_17f*5;}else{var adj=0;var aDay=_175.getDay();var bDay=_176.getDay();_17f=parseInt(days/7);mod=days%7;var _184=new Date(_175);_184.setDate(_184.getDate()+(_17f*7));var _185=_184.getDay();if(days>0){switch(true){case aDay==6:adj=-1;break;case aDay==0:adj=0;break;case bDay==6:adj=-1;break;case bDay==0:adj=-2;break;case (_185+mod)>5:adj=-2;}}else{if(days<0){switch(true){case aDay==6:adj=0;break;case aDay==0:adj=1;break;case bDay==6:adj=2;break;case bDay==0:adj=1;break;case (_185+mod)<0:adj=2;}}}days+=adj;days-=(_17f*2);}_179=days;break;case "year":_179=_178;break;case "month":_179=(_176.getMonth()-_175.getMonth())+(_178*12);break;case "week":_179=parseInt(dojo.date.difference(_175,_176,"day")/7);break;case "day":_179/=24;case "hour":_179/=60;case "minute":_179/=60;case "second":_179/=1000;case "millisecond":_179*=_176.getTime()-_175.getTime();}return Math.round(_179);};}if(!dojo._hasResource["dojox.date.php"]){dojo._hasResource["dojox.date.php"]=true;dojo.provide("dojox.date.php");dojox.date.php.format=function(date,_187){var df=new dojox.date.php.DateFormat(_187);return df.format(date);};dojox.date.php.DateFormat=function(_189){if(!this.regex){var keys=[];for(var key in this.constructor.prototype){if(dojo.isString(key)&&key.length==1&&dojo.isFunction(this[key])){keys.push(key);}}this.constructor.prototype.regex=new RegExp("(?:(\\\\.)|(["+keys.join("")+"]))","g");}var _18c=[];this.tokens=dojox.string.tokenize(_189,this.regex,function(_18d,_18e,i){if(_18e){_18c.push([i,_18e]);return _18e;}if(_18d){return _18d.charAt(1);}});this.replacements=_18c;};dojo.extend(dojox.date.php.DateFormat,{weekdays:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],weekdays_3:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],months_3:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],monthdays:[31,28,31,30,31,30,31,31,30,31,30,31],format:function(date){this.date=date;for(var i=0,_192;_192=this.replacements[i];i++){this.tokens[_192[0]]=this[_192[1]]();}return this.tokens.join("");},d:function(){var j=this.j();return (j.length==1)?"0"+j:j;},D:function(){return this.weekdays_3[this.date.getDay()];},j:function(){return this.date.getDate()+"";},l:function(){return this.weekdays[this.date.getDay()];},N:function(){var w=this.w();return (!w)?7:w;},S:function(){switch(this.date.getDate()){case 11:case 12:case 13:return "th";case 1:case 21:case 31:return "st";case 2:case 22:return "nd";case 3:case 23:return "rd";default:return "th";}},w:function(){return this.date.getDay()+"";},z:function(){var _195=this.date.getTime()-new Date(this.date.getFullYear(),0,1).getTime();return Math.floor(_195/86400000)+"";},W:function(){var week;var _197=new Date(this.date.getFullYear(),0,1).getDay()+1;var w=this.date.getDay()+1;var z=parseInt(this.z());if(z<=(8-_197)&&_197>4){var _19a=new Date(this.date.getFullYear()-1,this.date.getMonth(),this.date.getDate());if(_197==5||(_197==6&&dojo.date.isLeapYear(_19a))){week=53;}else{week=52;}}else{var i;if(Boolean(this.L())){i=366;}else{i=365;}if((i-z)<(4-w)){week=1;}else{var j=z+(7-w)+(_197-1);week=Math.ceil(j/7);if(_197>4){--week;}}}return week;},F:function(){return this.months[this.date.getMonth()];},m:function(){var n=this.n();return (n.length==1)?"0"+n:n;},M:function(){return this.months_3[this.date.getMonth()];},n:function(){return this.date.getMonth()+1+"";},t:function(){return (Boolean(this.L())&&this.date.getMonth()==1)?29:this.monthdays[this.getMonth()];},L:function(){return (dojo.date.isLeapYear(this.date))?"1":"0";},o:function(){},Y:function(){return this.date.getFullYear()+"";},y:function(){return this.Y().slice(-2);},a:function(){return this.date.getHours()>=12?"pm":"am";},b:function(){return this.a().toUpperCase();},B:function(){var off=this.date.getTimezoneOffset()+60;var secs=(this.date.getHours()*3600)+(this.date.getMinutes()*60)+this.getSeconds()+(off*60);var beat=Math.abs(Math.floor(secs/86.4)%1000)+"";while(beat.length<2){beat="0"+beat;}return beat;},g:function(){return (this.date.getHours()>12)?this.date.getHours()-12+"":this.date.getHours()+"";},G:function(){return this.date.getHours()+"";},h:function(){var g=this.g();return (g.length==1)?"0"+g:g;},H:function(){var G=this.G();return (G.length==1)?"0"+G:G;},i:function(){var mins=this.date.getMinutes()+"";return (mins.length==1)?"0"+mins:mins;},s:function(){var secs=this.date.getSeconds()+"";return (secs.length==1)?"0"+secs:secs;},e:function(){return dojo.date.getTimezoneName(this.date);},I:function(){},O:function(){var off=Math.abs(this.date.getTimezoneOffset());var _1a6=Math.floor(off/60)+"";var mins=(off%60)+"";if(_1a6.length==1){_1a6="0"+_1a6;}if(mins.length==1){_1a6="0"+mins;}return ((this.date.getTimezoneOffset()<0)?"+":"-")+_1a6+mins;},P:function(){var O=this.O();return O.substring(0,2)+":"+O.substring(2,4);},T:function(){return this.e().substring(0,3);},Z:function(){return this.date.getTimezoneOffset()*-60;},c:function(){return this.Y()+"-"+this.m()+"-"+this.d()+"T"+this.h()+":"+this.i()+":"+this.s()+this.P();},r:function(){return this.D()+", "+this.d()+" "+this.M()+" "+this.Y()+" "+this.H()+":"+this.i()+":"+this.s()+" "+this.O();},U:function(){return Math.floor(this.date.getTime()/1000);}});}if(!dojo._hasResource["dojox.dtl.utils.date"]){dojo._hasResource["dojox.dtl.utils.date"]=true;dojo.provide("dojox.dtl.utils.date");dojox.dtl.utils.date.DateFormat=function(_1a9){dojox.date.php.DateFormat.call(this,_1a9);};dojo.extend(dojox.dtl.utils.date.DateFormat,dojox.date.php.DateFormat.prototype,{f:function(){return (!this.date.getMinutes())?this.g():this.g()+":"+this.i();},N:function(){return dojox.dtl.utils.date._months_ap[this.date.getMonth()];},P:function(){if(!this.date.getMinutes()&&!this.date.getHours()){return "midnight";}if(!this.date.getMinutes()&&this.date.getHours()==12){return "noon";}return this.f()+" "+this.a();}});dojo.mixin(dojox.dtl.utils.date,{format:function(date,_1ab){var df=new dojox.dtl.utils.date.DateFormat(_1ab);return df.format(date);},timesince:function(d,now){if(!(d instanceof Date)){d=new Date(d.year,d.month,d.day);}if(!now){now=new Date();}var _1af=Math.abs(now.getTime()-d.getTime());for(var i=0,_1b1;_1b1=dojox.dtl.utils.date._chunks[i];i++){var _1b2=Math.floor(_1af/_1b1[0]);if(_1b2){break;}}return _1b2+" "+_1b1[1](_1b2);},_chunks:[[60*60*24*365*1000,function(n){return (n==1)?"year":"years";}],[60*60*24*30*1000,function(n){return (n==1)?"month":"months";}],[60*60*24*7*1000,function(n){return (n==1)?"week":"weeks";}],[60*60*24*1000,function(n){return (n==1)?"day":"days";}],[60*60*1000,function(n){return (n==1)?"hour":"hours";}],[60*1000,function(n){return (n==1)?"minute":"minutes";}]],_months_ap:["Jan.","Feb.","March","April","May","June","July","Aug.","Sept.","Oct.","Nov.","Dec."]});}if(!dojo._hasResource["dojox.dtl.tag.date"]){dojo._hasResource["dojox.dtl.tag.date"]=true;dojo.provide("dojox.dtl.tag.date");dojox.dtl.tag.date.NowNode=function(_1b9,node){this._format=_1b9;this.format=new dojox.dtl.utils.date.DateFormat(_1b9);this.contents=node;};dojo.extend(dojox.dtl.tag.date.NowNode,{render:function(_1bb,_1bc){this.contents.set(this.format.format(new Date()));return this.contents.render(_1bb,_1bc);},unrender:function(_1bd,_1be){return this.contents.unrender(_1bd,_1be);},clone:function(_1bf){return new this.constructor(this._format,this.contents.clone(_1bf));}});dojox.dtl.tag.date.now=function(_1c0,_1c1){var _1c2=_1c1.split_contents();if(_1c2.length!=2){throw new Error("'now' statement takes one argument");}return new dojox.dtl.tag.date.NowNode(_1c2[1].slice(1,-1),_1c0.create_text_node());};}if(!dojo._hasResource["dojox.dtl.tag.loader"]){dojo._hasResource["dojox.dtl.tag.loader"]=true;dojo.provide("dojox.dtl.tag.loader");(function(){var dd=dojox.dtl;var ddtl=dd.tag.loader;ddtl.BlockNode=dojo.extend(function(name,_1c6){this.name=name;this.nodelist=_1c6;},{"super":function(){if(this.parent){var html=this.parent.nodelist.dummyRender(this.context,null,true);if(typeof html=="string"){html=new String(html);}html.safe=true;return html;}return "";},render:function(_1c8,_1c9){var name=this.name;var _1cb=this.nodelist;var _1cc;if(_1c9.blocks){var _1cd=_1c9.blocks[name];if(_1cd){_1cc=_1cd.parent;_1cb=_1cd.nodelist;_1cd.used=true;}}this.rendered=_1cb;_1c8=_1c8.push();this.context=_1c8;this.parent=null;if(_1cb!=this.nodelist){this.parent=this;}_1c8.block=this;if(_1c9.getParent){var _1ce=_1c9.getParent();var _1cf=dojo.connect(_1c9,"onSetParent",function(node,up,root){if(up&&root){_1c9.setParent(_1ce);}});}_1c9=_1cb.render(_1c8,_1c9,this);_1cf&&dojo.disconnect(_1cf);_1c8=_1c8.pop();return _1c9;},unrender:function(_1d3,_1d4){return this.rendered.unrender(_1d3,_1d4);},clone:function(_1d5){return new this.constructor(this.name,this.nodelist.clone(_1d5));},toString:function(){return "dojox.dtl.tag.loader.BlockNode";}});ddtl.ExtendsNode=dojo.extend(function(_1d6,_1d7,_1d8,_1d9,key){this.getTemplate=_1d6;this.nodelist=_1d7;this.shared=_1d8;this.parent=_1d9;this.key=key;},{parents:{},getParent:function(_1db){var _1dc=this.parent;if(!_1dc){var _1dd;_1dc=this.parent=_1db.get(this.key,false);if(!_1dc){throw new Error("extends tag used a variable that did not resolve");}if(typeof _1dc=="object"){var url=_1dc.url||_1dc.templatePath;if(_1dc.shared){this.shared=true;}if(url){_1dc=this.parent=url.toString();}else{if(_1dc.templateString){_1dd=_1dc.templateString;_1dc=this.parent=" ";}else{_1dc=this.parent=this.parent.toString();}}}if(_1dc&&_1dc.indexOf("shared:")===0){this.shared=true;_1dc=this.parent=_1dc.substring(7,_1dc.length);}}if(!_1dc){throw new Error("Invalid template name in 'extends' tag.");}if(_1dc.render){return _1dc;}if(this.parents[_1dc]){return this.parents[_1dc];}this.parent=this.getTemplate(_1dd||dojox.dtl.text.getTemplateString(_1dc));if(this.shared){this.parents[_1dc]=this.parent;}return this.parent;},render:function(_1df,_1e0){var _1e1=this.getParent(_1df);_1e1.blocks=_1e1.blocks||{};_1e0.blocks=_1e0.blocks||{};for(var i=0,node;node=this.nodelist.contents[i];i++){if(node instanceof dojox.dtl.tag.loader.BlockNode){var old=_1e1.blocks[node.name];if(old&&old.nodelist!=node.nodelist){_1e0=old.nodelist.unrender(_1df,_1e0);}_1e1.blocks[node.name]=_1e0.blocks[node.name]={shared:this.shared,nodelist:node.nodelist,used:false};}}this.rendered=_1e1;return _1e1.nodelist.render(_1df,_1e0,this);},unrender:function(_1e5,_1e6){return this.rendered.unrender(_1e5,_1e6,this);},toString:function(){return "dojox.dtl.block.ExtendsNode";}});ddtl.IncludeNode=dojo.extend(function(path,_1e8,_1e9,text,_1eb){this._path=path;this.constant=_1e8;this.path=(_1e8)?path:new dd._Filter(path);this.getTemplate=_1e9;this.text=text;this.parsed=(arguments.length==5)?_1eb:true;},{_cache:[{},{}],render:function(_1ec,_1ed){var _1ee=((this.constant)?this.path:this.path.resolve(_1ec)).toString();var _1ef=Number(this.parsed);var _1f0=false;if(_1ee!=this.last){_1f0=true;if(this.last){_1ed=this.unrender(_1ec,_1ed);}this.last=_1ee;}var _1f1=this._cache[_1ef];if(_1ef){if(!_1f1[_1ee]){_1f1[_1ee]=dd.text._resolveTemplateArg(_1ee,true);}if(_1f0){var _1f2=this.getTemplate(_1f1[_1ee]);this.rendered=_1f2.nodelist;}return this.rendered.render(_1ec,_1ed,this);}else{if(this.text instanceof dd._TextNode){if(_1f0){this.rendered=this.text;this.rendered.set(dd.text._resolveTemplateArg(_1ee,true));}return this.rendered.render(_1ec,_1ed);}else{if(!_1f1[_1ee]){var _1f3=[];var div=document.createElement("div");div.innerHTML=dd.text._resolveTemplateArg(_1ee,true);var _1f5=div.childNodes;while(_1f5.length){var _1f6=div.removeChild(_1f5[0]);_1f3.push(_1f6);}_1f1[_1ee]=_1f3;}if(_1f0){this.nodelist=[];var _1f7=true;for(var i=0,_1f9;_1f9=_1f1[_1ee][i];i++){this.nodelist.push(_1f9.cloneNode(true));}}for(var i=0,node;node=this.nodelist[i];i++){_1ed=_1ed.concat(node);}}}return _1ed;},unrender:function(_1fb,_1fc){if(this.rendered){_1fc=this.rendered.unrender(_1fb,_1fc);}if(this.nodelist){for(var i=0,node;node=this.nodelist[i];i++){_1fc=_1fc.remove(node);}}return _1fc;},clone:function(_1ff){return new this.constructor(this._path,this.constant,this.getTemplate,this.text.clone(_1ff),this.parsed);}});dojo.mixin(ddtl,{block:function(_200,_201){var _202=_201.contents.split();var name=_202[1];_200._blocks=_200._blocks||{};_200._blocks[name]=_200._blocks[name]||[];_200._blocks[name].push(name);var _204=_200.parse(["endblock","endblock "+name]).rtrim();_200.next_token();return new dojox.dtl.tag.loader.BlockNode(name,_204);},extends_:function(_205,_206){var _207=_206.contents.split();var _208=false;var _209=null;var key=null;if(_207[1].charAt(0)=="\""||_207[1].charAt(0)=="'"){_209=_207[1].substring(1,_207[1].length-1);}else{key=_207[1];}if(_209&&_209.indexOf("shared:")==0){_208=true;_209=_209.substring(7,_209.length);}var _20b=_205.parse();return new dojox.dtl.tag.loader.ExtendsNode(_205.getTemplate,_20b,_208,_209,key);},include:function(_20c,_20d){var _20e=_20d.contents.split();if(_20e.length!=2){throw new Error(_20e[0]+" tag takes one argument: the name of the template to be included");}var path=_20e[1];var _210=false;if((path.charAt(0)=="\""||path.slice(-1)=="'")&&path.charAt(0)==path.slice(-1)){path=path.slice(1,-1);_210=true;}return new ddtl.IncludeNode(path,_210,_20c.getTemplate,_20c.create_text_node());},ssi:function(_211,_212){var _213=_212.contents.split();var _214=false;if(_213.length==3){_214=(_213.pop()=="parsed");if(!_214){throw new Error("Second (optional) argument to ssi tag must be 'parsed'");}}var node=ddtl.include(_211,new dd.Token(_212.token_type,_213.join(" ")));node.parsed=_214;return node;}});})();}if(!dojo._hasResource["dojox.dtl.tag.misc"]){dojo._hasResource["dojox.dtl.tag.misc"]=true;dojo.provide("dojox.dtl.tag.misc");(function(){var dd=dojox.dtl;var ddtm=dd.tag.misc;ddtm.DebugNode=dojo.extend(function(text){this.text=text;},{render:function(_219,_21a){var keys=_219.getKeys();var _21c=[];var only={};for(var i=0,key;key=keys[i];i++){only[key]=_219[key];_21c+="["+key+": "+typeof _219[key]+"]\n";}return this.text.set(_21c).render(_219,_21a,this);},unrender:function(_220,_221){return _221;},clone:function(_222){return new this.constructor(this.text.clone(_222));},toString:function(){return "ddtm.DebugNode";}});ddtm.FilterNode=dojo.extend(function(_223,_224){this._varnode=_223;this._nodelist=_224;},{render:function(_225,_226){var _227=this._nodelist.render(_225,new dojox.string.Builder());_225=_225.update({"var":_227.toString()});var _228=this._varnode.render(_225,_226);_225=_225.pop();return _226;},unrender:function(_229,_22a){return _22a;},clone:function(_22b){return new this.constructor(this._expression,this._nodelist.clone(_22b));}});ddtm.FirstOfNode=dojo.extend(function(vars,text){this._vars=vars;this.vars=dojo.map(vars,function(item){return new dojox.dtl._Filter(item);});this.contents=text;},{render:function(_22f,_230){for(var i=0,item;item=this.vars[i];i++){var _233=item.resolve(_22f);if(typeof _233!="undefined"){if(_233===null){_233="null";}this.contents.set(_233);return this.contents.render(_22f,_230);}}return this.contents.unrender(_22f,_230);},unrender:function(_234,_235){return this.contents.unrender(_234,_235);},clone:function(_236){return new this.constructor(this._vars,this.contents.clone(_236));}});ddtm.SpacelessNode=dojo.extend(function(_237,text){this.nodelist=_237;this.contents=text;},{render:function(_239,_23a){if(_23a.getParent){var _23b=[dojo.connect(_23a,"onAddNodeComplete",this,"_watch"),dojo.connect(_23a,"onSetParent",this,"_watchParent")];_23a=this.nodelist.render(_239,_23a);dojo.disconnect(_23b[0]);dojo.disconnect(_23b[1]);}else{var _23c=this.nodelist.dummyRender(_239);this.contents.set(_23c.replace(/>\s+</g,"><"));_23a=this.contents.render(_239,_23a);}return _23a;},unrender:function(_23d,_23e){return this.nodelist.unrender(_23d,_23e);},clone:function(_23f){return new this.constructor(this.nodelist.clone(_23f),this.contents.clone(_23f));},_isEmpty:function(node){return (node.nodeType==3&&!node.data.match(/[^\s\n]/));},_watch:function(node){if(this._isEmpty(node)){var _242=false;if(node.parentNode.firstChild==node){node.parentNode.removeChild(node);}}else{var _243=node.parentNode.childNodes;if(node.nodeType==1&&_243.length>2){for(var i=2,_245;_245=_243[i];i++){if(_243[i-2].nodeType==1&&this._isEmpty(_243[i-1])){node.parentNode.removeChild(_243[i-1]);return;}}}}},_watchParent:function(node){var _247=node.childNodes;if(_247.length){while(node.childNodes.length){var last=node.childNodes[node.childNodes.length-1];if(!this._isEmpty(last)){return;}node.removeChild(last);}}}});ddtm.TemplateTagNode=dojo.extend(function(tag,text){this.tag=tag;this.contents=text;},{mapping:{openblock:"{%",closeblock:"%}",openvariable:"{{",closevariable:"}}",openbrace:"{",closebrace:"}",opencomment:"{#",closecomment:"#}"},render:function(_24b,_24c){this.contents.set(this.mapping[this.tag]);return this.contents.render(_24b,_24c);},unrender:function(_24d,_24e){return this.contents.unrender(_24d,_24e);},clone:function(_24f){return new this.constructor(this.tag,this.contents.clone(_24f));}});ddtm.WidthRatioNode=dojo.extend(function(_250,max,_252,text){this.current=new dd._Filter(_250);this.max=new dd._Filter(max);this.width=_252;this.contents=text;},{render:function(_254,_255){var _256=+this.current.resolve(_254);var max=+this.max.resolve(_254);if(typeof _256!="number"||typeof max!="number"||!max){this.contents.set("");}else{this.contents.set(""+Math.round((_256/max)*this.width));}return this.contents.render(_254,_255);},unrender:function(_258,_259){return this.contents.unrender(_258,_259);},clone:function(_25a){return new this.constructor(this.current.getExpression(),this.max.getExpression(),this.width,this.contents.clone(_25a));}});ddtm.WithNode=dojo.extend(function(_25b,_25c,_25d){this.target=new dd._Filter(_25b);this.alias=_25c;this.nodelist=_25d;},{render:function(_25e,_25f){var _260=this.target.resolve(_25e);_25e=_25e.push();_25e[this.alias]=_260;_25f=this.nodelist.render(_25e,_25f);_25e=_25e.pop();return _25f;},unrender:function(_261,_262){return _262;},clone:function(_263){return new this.constructor(this.target.getExpression(),this.alias,this.nodelist.clone(_263));}});dojo.mixin(ddtm,{comment:function(_264,_265){_264.skip_past("endcomment");return dd._noOpNode;},debug:function(_266,_267){return new ddtm.DebugNode(_266.create_text_node());},filter:function(_268,_269){var rest=_269.contents.split(null,1)[1];var _26b=_268.create_variable_node("var|"+rest);var _26c=_268.parse(["endfilter"]);_268.next_token();return new ddtm.FilterNode(_26b,_26c);},firstof:function(_26d,_26e){var _26f=_26e.split_contents().slice(1);if(!_26f.length){throw new Error("'firstof' statement requires at least one argument");}return new ddtm.FirstOfNode(_26f,_26d.create_text_node());},spaceless:function(_270,_271){var _272=_270.parse(["endspaceless"]);_270.delete_first_token();return new ddtm.SpacelessNode(_272,_270.create_text_node());},templatetag:function(_273,_274){var _275=_274.contents.split();if(_275.length!=2){throw new Error("'templatetag' statement takes one argument");}var tag=_275[1];var _277=ddtm.TemplateTagNode.prototype.mapping;if(!_277[tag]){var keys=[];for(var key in _277){keys.push(key);}throw new Error("Invalid templatetag argument: '"+tag+"'. Must be one of: "+keys.join(", "));}return new ddtm.TemplateTagNode(tag,_273.create_text_node());},widthratio:function(_27a,_27b){var _27c=_27b.contents.split();if(_27c.length!=4){throw new Error("widthratio takes three arguments");}var _27d=+_27c[3];if(typeof _27d!="number"){throw new Error("widthratio final argument must be an integer");}return new ddtm.WidthRatioNode(_27c[1],_27c[2],_27d,_27a.create_text_node());},with_:function(_27e,_27f){var _280=_27f.split_contents();if(_280.length!=4||_280[2]!="as"){throw new Error("do_width expected format as 'with value as name'");}var _281=_27e.parse(["endwith"]);_27e.next_token();return new ddtm.WithNode(_280[1],_280[3],_281);}});})();}if(!dojo._hasResource["dojox.dtl.ext-dojo.NodeList"]){dojo._hasResource["dojox.dtl.ext-dojo.NodeList"]=true;dojo.provide("dojox.dtl.ext-dojo.NodeList");dojo.extend(dojo.NodeList,{dtl:function(_282,_283){var d=dojox.dtl;var self=this;var _286=function(_287,_288){var _289=_287.render(new d._Context(_288));self.forEach(function(node){node.innerHTML=_289;});};d.text._resolveTemplateArg(_282).addCallback(function(_28b){_282=new d.Template(_28b);d.text._resolveContextArg(_283).addCallback(function(_28c){_286(_282,_28c);});});return this;}});}
