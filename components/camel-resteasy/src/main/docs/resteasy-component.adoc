= Resteasy Component
:doctitle: Resteasy
:shortname: resteasy
:artifactid: camel-resteasy
:description: Expose REST endpoints and access external REST servers.
:since: 3.4
:supportlevel: Preview
:component-header: Both producer and consumer are supported
//Manually maintained attributes
:camel-spring-boot-name: resteasy

*Since Camel {since}*

*{component-header}*

The *resteasy:* component provides HTTP based
endpoints for consuming HTTP requests that arrive at
a HTTP endpoint that is bound to a published Servlet.

Maven users will need to add the following dependency to their `pom.xml`
for this component:

[source,xml]
---------------------------------------------------------------
<dependency>
    <groupId>org.apache.camel</groupId>
    <artifactId>camel-resteasy</artifactId>
    <version>x.x.x</version>
    <!-- use the same version as your Camel core version -->
</dependency>
---------------------------------------------------------------

== URI format

---------------------------------
resteasy://relative_path[?options]
---------------------------------

// component-configure options: START

// component-configure options: END

// component options: START
include::partial$component-configure-options.adoc[]
include::partial$component-endpoint-options.adoc[]
// component options: END

// endpoint options: START

// endpoint options: END

// component headers: START
include::partial$component-endpoint-headers.adoc[]
// component headers: END

=== Usage

Consumer endpoints are similar to endpoints generated by the Servlet component.
Therefore, it should be used only as input into your Camel routes. To
issue HTTP requests against other HTTP endpoints, use the
xref:http-component.adoc[HTTP Component].

Producer endpoints rely on Resteasy Client API. https://docs.jboss.org/resteasy/docs/4.5.3.Final/userguide/html_single/index.html#RESTEasy_Client_Framework

== Putting Camel JARs in the app server boot classpath
Refer same section of  xref:servlet-component.adoc[Servlet Component].

== Sample

As a basic consumer with Spring example, first, you need to publish the servlet 
using  the `Web.xml` file to publish


Notice that below two listeners are registered when application server is initialized.
The org.jboss.resteasy.plugins.server.servlet.ResteasyBootstrap class is a ServletContextListener that configures an instance of an ResteasyProviderFactory and Registry. You can obtain instances of a ResteasyProviderFactory and Registry from the ServletContext attributes org.jboss.resteasy.spi.ResteasyProviderFactory and org.jboss.resteasy.spi.Registry. From these instances you can programmatically interact with RESTEasy registration interfaces.
Please note that the SpringContextLoaderListener must be declared after ResteasyBootstrap as it uses ServletContext attributes initialized by it. 
For further details please refer to https://docs.jboss.org/resteasy/docs/4.5.3.Final/userguide/html_single/index.html#RESTEasy_Spring_Integration


[source,xml]
-------------------------------------------------------------------------
<web-app>
    <context-param>
        <param-name>contextConfigLocation</param-name>
        <param-value>WEB-INF/applicationContext.xml</param-value>
    </context-param>
    <listener>
        <listener-class>org.jboss.resteasy.plugins.server.servlet.ResteasyBootstrap</listener-class>
    </listener>

    <listener>
        <listener-class>org.jboss.resteasy.plugins.spring.SpringContextLoaderListener</listener-class>
    </listener>

    <servlet>
        <servlet-name>resteasy-camel-servlet</servlet-name>
        <servlet-class>org.apache.camel.component.resteasy.servlet.ResteasyCamelServlet</servlet-class>
    </servlet>

    <servlet-mapping>
        <servlet-name>resteasy-camel-servlet</servlet-name>
        <url-pattern>/*</url-pattern>
    </servlet-mapping>

</web-app>
-------------------------------------------------------------------------

Then you can define your route as follows:

[source,xml]
-------------------------------------------------------------------------
<context:component-scan base-package="org.apache.camel.component.resteasy.test">
    <context:include-filter type="annotation" expression="javax.ws.rs.Path"/>
</context:component-scan>

    ........

<camel:camelContext>

    <camel:route>
        <camel:from uri="resteasy:/customer/getAll?servletName=resteasy-camel-servlet"/>
        <camel:to uri="file://target/test/consumerTest?fileName=all.txt"/>
    </camel:route>

 </camel:camelContext>
-------------------------------------------------------------------------

Notice that component-scan is important to load resteasy servlet properly into container's runtime.


include::spring-boot:partial$starter.adoc[]
