= Apache Camel 4.x Upgrade Guide

This document is for helping you upgrade your Apache Camel application
from Camel 4.x to 4.y. For example, if you are upgrading Camel 4.0 to 4.2, then you should follow the guides
from both 4.0 to 4.1 and 4.1 to 4.2.

[NOTE]
====
https://github.com/apache/camel-upgrade-recipes/[The Camel Upgrade Recipes project] provides automated assistance for some common migration tasks.
Note that manual migration is still required.
See the xref:camel-upgrade-recipes-tool.adoc[documentation] page for details.
====

== Upgrading Camel 4.15 to 4.16

=== camel-infinispan

The `queryBuilder` option on `camel-infinispan` endpoint has been migrated to no longer use the deprecated query factory
`org.infinispan.query.dsl.QueryFactory` to the new query API that is based on ickle query syntax.

This means old code such:

[source,java]
----
    private InfinispanQueryBuilder continuousQueryBuilder
            = qf -> qf.from(User.class).having("name").like("CQ%").build();
----

Should use the https://infinispan.org/docs/stable/titles/query/query.html#ickle-query-language[ickle] query syntax:

[source,java]
----
    private InfinispanQueryBuilder continuousQueryBuilder
            = qf -> qf.query("FROM sample_bank_account.User WHERE name LIKE 'CQ%'");
----